import{w as P,r as Y}from"./cb8YYDgi.js";import{X as R}from"./hL1o1GA-.js";const B=P(void 0);function g(t,e){const{computePosition:p,autoUpdate:l,offset:m,shift:v,flip:c,arrow:w,size:h,autoPlacement:a,hide:u,inline:E}=R(B),r={open:!1,autoUpdateCleanup:()=>{}},U=':is(a[href], button, input, textarea, select, details, [tabindex]):not([tabindex="-1"])';let b;const d="https://www.skeleton.dev/utilities/popups";let o,L;function C(){o=document.querySelector(`[data-popup="${e.target}"]`)??document.createElement("div"),L=o.querySelector(".arrow")??document.createElement("div")}C();function $(){var i,f,k,I,M,q,Q,T;if(!o)throw new Error(`The data-popup="${e.target}" element was not found. ${d}`);if(!p)throw new Error(`Floating UI 'computePosition' not found for data-popup="${e.target}". ${d}`);if(!m)throw new Error(`Floating UI 'offset' not found for data-popup="${e.target}". ${d}`);if(!v)throw new Error(`Floating UI 'shift' not found for data-popup="${e.target}". ${d}`);if(!c)throw new Error(`Floating UI 'flip' not found for data-popup="${e.target}". ${d}`);if(!w)throw new Error(`Floating UI 'arrow' not found for data-popup="${e.target}". ${d}`);const n=[];h&&n.push(h((i=e.middleware)==null?void 0:i.size)),a&&n.push(a((f=e.middleware)==null?void 0:f.autoPlacement)),u&&n.push(u((k=e.middleware)==null?void 0:k.hide)),E&&n.push(E((I=e.middleware)==null?void 0:I.inline)),p(t,o,{placement:e.placement??"bottom",middleware:[m(((M=e.middleware)==null?void 0:M.offset)??8),v(((q=e.middleware)==null?void 0:q.shift)??{padding:8}),c((Q=e.middleware)==null?void 0:Q.flip),w(((T=e.middleware)==null?void 0:T.arrow)??{element:L||null}),...n]}).then(({x:W,y:X,placement:_,middlewareData:J})=>{if(Object.assign(o.style,{left:`${W}px`,top:`${X}px`}),L){const{x:O,y:j}=J.arrow,K={top:"bottom",right:"left",bottom:"top",left:"right"}[_.split("-")[0]];Object.assign(L.style,{left:O!=null?`${O}px`:"",top:j!=null?`${j}px`:"",right:"",bottom:"",[K]:"-4px"})}})}function y(){o&&(r.open=!0,e.state&&e.state({state:r.open}),$(),o.style.display="block",o.style.opacity="1",o.style.pointerEvents="auto",o.removeAttribute("inert"),r.autoUpdateCleanup=l(t,o,$),b=Array.from(o==null?void 0:o.querySelectorAll(U)))}function s(n){if(!o)return;const i=parseFloat(window.getComputedStyle(o).transitionDuration.replace("s",""))*1e3;setTimeout(()=>{r.open=!1,e.state&&e.state({state:r.open}),o.style.opacity="0",o.setAttribute("inert",""),r.autoUpdateCleanup&&r.autoUpdateCleanup(),n&&n()},i)}function S(){r.open===!1?y():s()}function x(n){if(r.open===!1||t.contains(n.target))return;if(o&&o.contains(n.target)===!1){s();return}const i=e.closeQuery===void 0?"a[href], button":e.closeQuery;if(i==="")return;const f=o==null?void 0:o.querySelectorAll(i);f==null||f.forEach(k=>{k.contains(n.target)&&s()})}const D=n=>{if(r.open===!1)return;const i=n.key;if(i==="Escape"){n.preventDefault(),t.focus(),s();return}b=Array.from(o==null?void 0:o.querySelectorAll(U)),r.open&&document.activeElement===t&&(i==="ArrowDown"||i==="Tab")&&U.length>0&&b.length>0&&(n.preventDefault(),b[0].focus())};switch(e.event){case"click":t.addEventListener("click",S,!0),window.addEventListener("click",x,!0);break;case"hover":t.addEventListener("mouseover",y,!0),t.addEventListener("mouseleave",()=>s(),!0);break;case"focus-blur":t.addEventListener("focus",S,!0),t.addEventListener("blur",()=>s(),!0);break;case"focus-click":t.addEventListener("focus",y,!0),window.addEventListener("click",x,!0);break;default:throw new Error(`Event value of '${e.event}' is not supported. ${d}`)}return window.addEventListener("keydown",D,!0),$(),{update(n){s(()=>{e=n,$(),C()})},destroy(){t.removeEventListener("click",S,!0),t.removeEventListener("mouseover",y,!0),t.removeEventListener("mouseleave",()=>s(),!0),t.removeEventListener("focus",S,!0),t.removeEventListener("focus",y,!0),t.removeEventListener("blur",()=>s(),!0),window.removeEventListener("click",x,!0),window.removeEventListener("keydown",D,!0)}}}const A={};function z(t){return t==="local"?localStorage:sessionStorage}function F(t,e,p){const l=JSON,m="local";function v(c,w){z(m).setItem(c,l.stringify(w))}if(!A[t]){const c=P(e,a=>{const u=z(m).getItem(t);u&&a(l.parse(u));{const E=r=>{r.key===t&&a(r.newValue?l.parse(r.newValue):null)};return window.addEventListener("storage",E),()=>window.removeEventListener("storage",E)}}),{subscribe:w,set:h}=c;A[t]={set(a){v(t,a),h(a)},update(a){const u=a(R(c));v(t,u),h(u)},subscribe:w}}return A[t]}F("modeOsPrefers",!1);F("modeUserPrefers",void 0);F("modeCurrent",!1);const V="(prefers-reduced-motion: reduce)";function G(){return window.matchMedia(V).matches}Y(G(),t=>{{const e=l=>{t(l.matches)},p=window.matchMedia(V);return p.addEventListener("change",e),()=>{p.removeEventListener("change",e)}}});export{g as p,B as s};
//# sourceMappingURL=CwjT12RE.js.map
