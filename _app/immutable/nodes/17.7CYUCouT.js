import{S as K,i as L,s as Q,n as C,d as h,b as m,c as p,x as W,e as k,f as w,h as O,j as y,k as j,H as X,C as J,D as N,E as Y,a as q,g,t as v,F as Z,A as $,G as S,B as T,r as A}from"../chunks/Dh7Go4Hy.js";import{e as D}from"../chunks/C-CYvatg.js";import"../chunks/IHki7fMi.js";function F(r,n,e){const l=r.slice();return l[7]=n[e][0],l[8]=n[e][1],l}function G(r,n,e){const l=r.slice();return l[11]=n[e],l}function H(r){let n,e=D(Object.entries(r[1].facets)),l=[];for(let t=0;t<e.length;t+=1)l[t]=z(F(r,e,t));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();n=N()},l(t){for(let o=0;o<l.length;o+=1)l[o].l(t);n=N()},m(t,o){for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(t,o);m(t,n,o)},p(t,o){if(o&7){e=D(Object.entries(t[1].facets));let i;for(i=0;i<e.length;i+=1){const f=F(t,e,i);l[i]?l[i].p(f,o):(l[i]=z(f),l[i].c(),l[i].m(n.parentNode,n))}for(;i<l.length;i+=1)l[i].d(1);l.length=e.length}},d(t){t&&h(n),J(l,t)}}}function R(r){let n,e=r[7]+"",l,t,o,i,f,_=D(r[8]),s=[];for(let a=0;a<_.length;a+=1)s[a]=U(G(r,_,a));return{c(){n=y("b"),l=v(e),t=j(),o=y("br"),i=j();for(let a=0;a<s.length;a+=1)s[a].c();f=N()},l(a){n=k(a,"B",{});var c=w(n);l=g(c,e),c.forEach(h),t=O(a),o=k(a,"BR",{}),i=O(a);for(let u=0;u<s.length;u+=1)s[u].l(a);f=N()},m(a,c){m(a,n,c),p(n,l),m(a,t,c),m(a,o,c),m(a,i,c);for(let u=0;u<s.length;u+=1)s[u]&&s[u].m(a,c);m(a,f,c)},p(a,c){if(c&2&&e!==(e=a[7]+"")&&q(l,e),c&7){_=D(a[8]);let u;for(u=0;u<_.length;u+=1){const E=G(a,_,u);s[u]?s[u].p(E,c):(s[u]=U(E),s[u].c(),s[u].m(f.parentNode,f))}for(;u<s.length;u+=1)s[u].d(1);s.length=_.length}},d(a){a&&(h(n),h(t),h(o),h(i),h(f)),J(s,a)}}}function U(r){let n,e,l,t=!1,o,i=r[11].name+"",f,_,s,a,c=r[11].count+"",u,E,I,B,V,M;return B=Z(r[4][0]),{c(){n=y("div"),e=y("input"),o=v(`
							  `),f=v(i),_=j(),s=y("em"),a=v("("),u=v(c),E=v(")"),I=j(),this.h()},l(b){n=k(b,"DIV",{class:!0});var d=w(n);e=k(d,"INPUT",{type:!0}),o=g(d,`
							  `),f=g(d,i),_=O(d),s=k(d,"EM",{});var P=w(s);a=g(P,"("),u=g(P,c),E=g(P,")"),P.forEach(h),I=O(d),d.forEach(h),this.h()},h(){A(e,"type","checkbox"),e.__value=l=r[7]+"%"+r[11].name,S(e,e.__value),A(n,"class","pl-4"),B.p(e)},m(b,d){m(b,n,d),p(n,e),e.checked=~(r[0]||[]).indexOf(e.__value),p(n,o),p(n,f),p(n,_),p(n,s),p(s,a),p(s,u),p(s,E),p(n,I),V||(M=[T(e,"change",r[3]),T(e,"change",r[2])],V=!0)},p(b,d){d&2&&l!==(l=b[7]+"%"+b[11].name)&&(e.__value=l,S(e,e.__value),t=!0),(t||d&3)&&(e.checked=~(b[0]||[]).indexOf(e.__value)),d&2&&i!==(i=b[11].name+"")&&q(f,i),d&2&&c!==(c=b[11].count+"")&&q(u,c)},d(b){b&&h(n),B.r(),V=!1,$(M)}}}function z(r){let n,e=r[7]!="file_id"&&r[7]!="title"&&r[7]!="variable_abbr"&&R(r);return{c(){e&&e.c(),n=N()},l(l){e&&e.l(l),n=N()},m(l,t){e&&e.m(l,t),m(l,n,t)},p(l,t){l[7]!="file_id"&&l[7]!="title"&&l[7]!="variable_abbr"?e?e.p(l,t):(e=R(l),e.c(),e.m(n.parentNode,n)):e&&(e.d(1),e=null)},d(l){l&&h(n),e&&e.d(l)}}}function x(r){let n;return{c(){n=v("No datasets found")},l(e){n=g(e,"No datasets found")},m(e,l){m(e,n,l)},p:C,d(e){e&&h(n)}}}function ee(r){let n,e=r[1].hits.length+"",l;return{c(){n=v("Number of found datasets: "),l=v(e)},l(t){n=g(t,"Number of found datasets: "),l=g(t,e)},m(t,o){m(t,n,o),m(t,l,o)},p(t,o){o&2&&e!==(e=t[1].hits.length+"")&&q(l,e)},d(t){t&&(h(n),h(l))}}}function te(r){let n,e,l,t=r[1].facets&&H(r);function o(_,s){return _[1].hits&&_[1].hits.length>0?ee:x}let i=o(r),f=i(r);return{c(){n=y("div"),e=y("div"),t&&t.c(),l=j(),f.c(),this.h()},l(_){n=k(_,"DIV",{style:!0});var s=w(n);e=k(s,"DIV",{});var a=w(e);t&&t.l(a),l=O(a),f.l(a),a.forEach(h),s.forEach(h),this.h()},h(){W(n,"display","flex")},m(_,s){m(_,n,s),p(n,e),t&&t.m(e,null),p(e,l),f.m(e,null)},p(_,[s]){_[1].facets?t?t.p(_,s):(t=H(_),t.c(),t.m(e,l)):t&&(t.d(1),t=null),i===(i=o(_))&&f?f.p(_,s):(f.d(1),f=i(_),f&&(f.c(),f.m(e,null)))},i:C,o:C,d(_){_&&h(n),t&&t.d(),f.d()}}}function le(r,n,e){let l=[],t=[],o="",i="";X(async()=>{i="https://leutra.geogr.uni-jena.de/backend_geoportal/climate/search_collection?",f()});async function f(){o="";for(let a=0;a<l.length;a++)o=o+"&"+l[a].replace("%","=");try{const a=await fetch(i+o);console.log(a);let c=[];if(!a.ok)throw new Error(`${a.status} ${a.statusText}`);return c=await a.json(),console.log("result",c),c.hasOwnProperty("hits")&&e(1,t.hits=c.hits,t),c.hasOwnProperty("facets")&&e(1,t.facets=c.facets,t),c.hasOwnProperty("facets_ordered")&&e(1,t.facets_ordered=c.facets_ordered,t),e(1,t),console.log("geo_data",t),c}catch(a){return console.log(a),[]}}const _=[[]];function s(){l=Y(_[0],this.__value,this.checked),e(0,l)}return[l,t,f,s,_]}class se extends K{constructor(n){super(),L(this,n,le,te,Q,{})}}export{se as component};
//# sourceMappingURL=17.7CYUCouT.js.map
