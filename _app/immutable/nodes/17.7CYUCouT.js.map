{"version":3,"file":"17.7CYUCouT.js","sources":["../../../../../../src/routes/search_collection_fabian/+page.svelte"],"sourcesContent":["<script>\n\timport { onMount } from 'svelte';\n\n\t/**\n\t * @type {any[]}\n\t */\n\tlet query_parameter = [];\n\n\t/**\n\t * @type {Object.<string, any>}\n\t */\n\tlet geo_data = [];\n\tlet query = '';\n\n\tlet url = '';\n\n\tonMount(async () => {\n\t\turl = 'https://leutra.geogr.uni-jena.de/backend_geoportal/climate/search_collection?';\n\t\t// initial query\n\t\tsend_query();\n\t});\n\n\tasync function send_query() {\n\t\tquery = '';\n\t\tfor (let i = 0; i < query_parameter.length; i++) {\n\t\t\tquery = query + '&' + query_parameter[i].replace('%', '=');\n\t\t}\n\n\t\ttry {\n\t\t\tconst res = await fetch(url + query);\n\t\t\tconsole.log(res);\n\t\t\tlet result = [];\n\t\t\tif (!res.ok) {\n\t\t\t\tthrow new Error(`${res.status} ${res.statusText}`);\n\t\t\t}\n\n\t\t\tresult = await res.json();\n\t\t\tconsole.log('result', result);\n\t\t\tif (result.hasOwnProperty('hits')) {\n\t\t\t\tgeo_data['hits'] = result.hits;\n\t\t\t}\n\n\t\t\tif (result.hasOwnProperty('facets')) {\n\t\t\t\tgeo_data['facets'] = result.facets;\n\t\t\t}\n\n\t\t\tif (result.hasOwnProperty('facets_ordered')) {\n\t\t\t\tgeo_data['facets_ordered'] = result.facets_ordered;\n\t\t\t}\n\t\t\tgeo_data = geo_data;\n\t\t\tconsole.log('geo_data', geo_data);\n\n\t\t\treturn result;\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t\treturn [];\n\t\t}\n\t}\n\n\t// array with current geo_data['facets']['file_id']\n</script>\n\n<div style=\"display:flex\">\n\t<div>\n\t\t{#if geo_data['facets']}\n\t\t\t{#each Object.entries(geo_data['facets']) as [key, value]}\n\t\t\t\t{#if key != 'file_id' && key != 'title' && key != 'variable_abbr'}\n\t\t\t\t\t<b>{key}</b> <br />\n\t\t\t\t\t{#each value as facet_value}\n\t\t\t\t\t\t<div class=\"pl-4\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tbind:group={query_parameter}\n\t\t\t\t\t\t\t\tvalue={key + '%' + facet_value['name']}\n\t\t\t\t\t\t\t\ton:change={send_query}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t&nbsp; {facet_value['name']} <em>({facet_value['count']})</em>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/each}\n\t\t\t\t{/if}\n\t\t\t{/each}\n\t\t{/if}\n\n\t\t{#if geo_data['hits'] && geo_data['hits'].length > 0}\n\t\t\tNumber of found datasets: {geo_data['hits'].length}\n\t\t{:else}\n\t\t\tNo datasets found\n\t\t{/if}\n\t</div>\n</div>\n"],"names":["each_value","ensure_array_like","ctx","i","insert_hydration","target","b","anchor","br","set_data","t0","t0_value","t1_value","t4_value","input","input_value_value","div","append_hydration","em","dirty","t1","t4","create_if_block_2","if_block0","create_if_block_1","create_if_block","div1","div0","query_parameter","geo_data","query","url","onMount","send_query","res","result","$$invalidate","error","get_binding_group_value","$$binding_groups"],"mappings":"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"}