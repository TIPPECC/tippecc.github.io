{"version":3,"file":"16.nK5uyz20.js","sources":["../../../../../../src/routes/search/+page.svelte"],"sourcesContent":["<script>\n\t/**\n\t * @type {any[]}\n\t */\n\tlet query_parameter = [];\n\n\t/**\n\t * @type {Object.<string, any>}\n\t */\n\tlet geo_data = [];\n\tlet query = '';\n\n\tlet font_bold_col = 'font-bold';\n\tlet font_bold_ind = '';\n\n\tlet url = '';\n\n\t// set default search type\n\tselect_search_type('collection');\n\n\t// initial query\n\tsend_query();\n\n\t/**\n\t * @param {string} search_type\n\t */\n\tfunction select_search_type(search_type) {\n\t\tif (search_type == 'collection') {\n\t\t\turl = 'https://leutra.geogr.uni-jena.de/backend_geoportal/climate/search_collection?';\n\t\t\tfont_bold_ind = '';\n\t\t\tfont_bold_col = 'font-bold';\n\t\t\tquery_parameter = [];\n\t\t\tsend_query();\n\t\t} else if (search_type == 'indicator') {\n\t\t\turl = 'https://leutra.geogr.uni-jena.de/backend_geoportal/climate/search_indicator?';\n\t\t\tfont_bold_col = '';\n\t\t\tfont_bold_ind = 'font-bold';\n\t\t\tquery_parameter = [];\n\t\t\tsend_query();\n\t\t}\n\t}\n\n\tasync function send_query() {\n\t\tquery = '';\n\t\tfor (let i = 0; i < query_parameter.length; i++) {\n\t\t\tquery = query + '&' + query_parameter[i].replace('%', '=');\n\t\t}\n\n\t\ttry {\n\t\t\tconst res = await fetch(url + query);\n\t\t\tconsole.log(res);\n\t\t\tlet result = [];\n\t\t\tif (!res.ok) {\n\t\t\t\tthrow new Error(`${res.status} ${res.statusText}`);\n\t\t\t}\n\n\t\t\tresult = await res.json();\n\t\t\tconsole.log('result', result);\n\t\t\tif (result.hasOwnProperty('hits')) {\n\t\t\t\tgeo_data['hits'] = result.hits;\n\t\t\t}\n\n\t\t\tif (result.hasOwnProperty('facets')) {\n\t\t\t\tgeo_data['facets'] = result.facets;\n\t\t\t}\n\n\t\t\tif (result.hasOwnProperty('facets_ordered')) {\n\t\t\t\tgeo_data['facets_ordered'] = result.facets_ordered;\n\t\t\t}\n\t\t\tgeo_data = geo_data;\n\t\t\tconsole.log('geo_data', geo_data);\n\n\t\t\treturn result;\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t\treturn [];\n\t\t}\n\t}\n\n\t// array with current geo_data['facets']['file_id']\n</script>\n\n<div>\n\t<div><h1>Test Search Page</h1></div>\n\n\t<div class=\"btn-group variant-ghost-primary [&>*+*]:border-red-500 h-6\">\n\t\t<button\n\t\t\ttype=\"button\"\n\t\t\tclass=\"btn variant-filled-tertiary {font_bold_col}\"\n\t\t\ton:click={() => select_search_type('collection')}>Search</button\n\t\t>\n\t\t<button\n\t\t\ttype=\"button\"\n\t\t\tclass=\"btn variant-filled-tertiary {font_bold_ind}\"\n\t\t\ton:click={() => select_search_type('indicator')}>Indicator</button\n\t\t>\n\t</div>\n</div>\n<div style=\"display:flex\">\n\t<div>\n\t\t{#if geo_data['facets']}\n\t\t\t{#each Object.entries(geo_data['facets']) as [key, value]}\n\t\t\t\t{#if key != 'file_id' && key != 'title'}\n\t\t\t\t\t<b>{key}</b> <br />\n\t\t\t\t\t{#each value as facet_value}\n\t\t\t\t\t\t<div class=\"pl-4\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tbind:group={query_parameter}\n\t\t\t\t\t\t\t\tvalue={key + '%' + facet_value['name']}\n\t\t\t\t\t\t\t\ton:change={send_query}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t&nbsp; {facet_value['name']} <em>({facet_value['count']})</em>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/each}\n\t\t\t\t{/if}\n\t\t\t{/each}\n\t\t{/if}\n\t</div>\n\t<div>\n\t\t{#if geo_data['facets']}\n\t\t\t{#each Object.entries(geo_data['facets']) as [key, value]}\n\t\t\t\t{#if key == 'title'}\n\t\t\t\t\t<b>{key}</b> <br />\n\t\t\t\t\t{#each value as facet_value}\n\t\t\t\t\t\t<div class=\"pl-4\">\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\tdisabled\n\t\t\t\t\t\t\t\ttype=\"checkbox\"\n\t\t\t\t\t\t\t\tbind:group={query_parameter}\n\t\t\t\t\t\t\t\tvalue={key + '%' + facet_value['name']}\n\t\t\t\t\t\t\t\ton:change={send_query}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t&nbsp; {facet_value['name']}\n\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\thref=\"https://leutra.geogr.uni-jena.de/tippec_data/{facet_value['name'].split('/')}\"\n\t\t\t\t\t\t\t\t>Download</a\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t{/each}\n\t\t\t\t{/if}\n\t\t\t{/each}\n\t\t{/if}\n\t\t{#if geo_data['hits']}\n\t\t\t{#each geo_data['hits'] as hit}\n\t\t\t\t<li>\n\t\t\t\t\tTitle: {hit['title']}\n\t\t\t\t</li>\n\t\t\t{/each}\n\t\t{/if}\n\t</div>\n</div>\n"],"names":["each_value_3","ensure_array_like","ctx","i","insert_hydration","target","b","anchor","br","set_data","t0","t0_value","t1_value","t4_value","input","input_value_value","div","append_hydration","em","dirty","t1","t4","if_block","create_if_block_4","each_value_1","attr","a","a_href_value","create_if_block_2","each_value","li","if_block0","create_if_block_3","if_block1","create_if_block_1","if_block2","create_if_block","div2","div0","div1","button0","button1","div5","div3","div4","query_parameter","geo_data","query","font_bold_col","font_bold_ind","url","select_search_type","send_query","search_type","$$invalidate","res","result","error","click_handler","click_handler_1","get_binding_group_value","$$binding_groups"],"mappings":"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"}